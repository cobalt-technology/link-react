# Cobalt Link React Component

This repository contains the React component for integrating the Cobalt Link flow into your application.

## Installation

To install the package, run:
```
npm i @cobalt-technology/react-link
```

## Usage

To use the Cobalt Link component, follow the example below:

```javascript
import React, { useCallback, useState, useEffect } from "react";

import { useCobaltLink } from "@cobalt-technology/react-link"; 

export default function CobaltLinkDemo() {
    const [publicToken, setPublicToken] = useState(""); 
    const [isReadyToInit, setIsReadyToInit] = useState(false);

    const onSuccess = useCallback((public_token) => {
        console.log("got the public_token: ", public_token);
        setPublicToken("Public token: " + public_token);
        // Here you can send the public_token to your server for further processing
    }, []);

    const { init, loading } = useCobaltLink({
        token: "%TEMP_TOKEN%", // This is generated by calling the Cobalt API with your credentials.
        onSuccess,
    });

    useEffect(() => {
        if (isReadyToInit && linkToken && !publicToken) {
            init();
        }
    }, [isReadyToInit, linkToken, init]);

    const initLink = async () => {
        try {
            setIsReadyToInit(true);
        } catch (err) {
            console.error("Failed to setup integration:", err);
        }
    };

    return (
        <div>
            <button disabled={loading} onClick={initLink}>
                Link Account
            </button>
        </div>
    );
}
```